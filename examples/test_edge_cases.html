<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Edge Cases Test</title>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            max-width: 800px;
            margin: 40px auto;
            padding: 20px;
            background: #f5f5f5;
        }
        #edge-cases, #malformed-latex {
            background: #ffffff;
            padding: 20px;
            border-radius: 8px;
            border-left: 4px solid #ffc107;
            line-height: 1.6;
            margin: 20px 0;
        }
        p {
            margin: 8px 0;
        }
    </style>
</head>
<body>
    <h1>Edge Cases Test</h1>
    <p><strong>Purpose:</strong> Test LaTeX regex edge cases and malformed LaTeX handling.</p>
    
    <hr style="margin: 30px 0;">
    
    <div id="edge-cases">
        <h2>Edge Cases</h2>
        
        <p><strong>Escaped dollar signs:</strong> The price is \$100, not $100. Formula: $x^2$</p>
        <p><strong>Nested formulas:</strong> Outer: $a = $b + c$ + d$ (should handle correctly)</p>
        <p><strong>Display formulas:</strong> \[x = \frac{-b \pm \sqrt{b^2 - 4ac}}{2a}\]</p>
        <p><strong>Inline parentheses:</strong> \(x = \frac{-b}{2a}\)</p>
        <p><strong>Environment:</strong> \begin{equation} E = mc^2 \end{equation}</p>
        <p><strong>Multiple formulas:</strong> $a$, $b$, and $c$ are variables. Also $d = e + f$.</p>
        <p><strong>Formula in code:</strong> <code>Price is $100</code> (should not convert)</p>
        <p><strong>Formula in pre:</strong> <pre>Price: $100</pre> (should not convert)</p>
    </div>
    
    <div id="malformed-latex">
        <h2>Malformed LaTeX</h2>
        
        <p><strong>Unclosed dollar:</strong> $x^2 + y^2 (missing closing $)</p>
        <p><strong>Unclosed bracket:</strong> \[x = \frac{1}{2} (missing closing \])</p>
        <p><strong>Mismatched braces:</strong> \begin{equation} E = mc^2 \end{equations} (wrong environment name)</p>
        <p><strong>Empty formula:</strong> $$ (empty)</p>
        <p><strong>Only delimiter:</strong> $ $ (space only)</p>
        <p><strong>Invalid characters:</strong> $x^@#$ (invalid LaTeX)</p>
        <p><strong>Nested delimiters:</strong> $x = $y + z$ (nested dollars)</p>
    </div>
    
    <hr style="margin: 30px 0;">
    <p style="color: #666; font-size: 0.9em;"><strong>Expected:</strong> Edge cases should be handled gracefully. Malformed LaTeX should not crash the extension.</p>
    
    <!-- MathJax for rendering LaTeX formulas -->
    <script>
        window.MathJax = {
            tex: {
                inlineMath: [['$', '$'], ['\\(', '\\)']],
                displayMath: [['\\[', '\\]']],
                processEscapes: true,
                processEnvironments: true
            },
            options: {
                skipHtmlTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
            }
        };
    </script>
    <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js" async></script>
</body>
</html>

